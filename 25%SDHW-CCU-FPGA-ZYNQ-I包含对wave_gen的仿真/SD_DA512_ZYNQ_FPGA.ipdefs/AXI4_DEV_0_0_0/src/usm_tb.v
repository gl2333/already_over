`timescale 1ns / 1ps
//////////////////////////////////////////////////////////////////////////////////
// Company: 
// Engineer: 
// 
// Create Date: 2018/02/22 14:54:03
// Design Name: 
// Module Name: usm_tb
// Project Name: 
// Target Devices: 
// Tool Versions: 
// Description: 
// 
// Dependencies: 
// 
// Revision:
// Revision 0.01 - File Created
// Additional Comments:
// 
//////////////////////////////////////////////////////////////////////////////////


module usm_tb();
reg clk;
reg rstn;
reg a,b,start,stop,lsta,lwat;
reg [31:0] delta_pulse;
reg [15:0] freq;

//outputs
wire [7:0] move_pulse;
wire sp,sn,cp,cn;
wire en;
wire done,limit,out,idle;

usm usminst(
    .i_clk(clk),
    .i_rst_n(rstn),
    .i_coder_A(a),
    .i_coder_B(b),
    .i_start(start),
    .i_stop(stop),
    .i_limit_sta(lsta),
    .i_limit_watch(lwat),
    .i_freq_word(freq),
    .i_delta_pulse(delta_pulse),
    .o_move_pulse(move_pulse),
    .O_SIN_P(sp),
    .O_SIN_N(sn),
    .O_COS_P(cp),
    .O_COS_N(cn),
    .O_PWR_EN(en),
    .o_irq_usm_done_pulse (done),
    .o_irq_usm_limit_pulse(limit),
    .o_irq_usm_time_out_pulse (out),
    .o_enter_idle_pulse (idle)
);    

always #10 clk = ~clk;

initial begin
 clk=0;
 rstn=0;
 #10; freq=10; delta_pulse=6; a=1; b=1; lsta=0; lwat=1; stop=0;
 #100; rstn=1;
 #100; start=1;
 #21; start=0;
     
#20;a=1;b=1; #20;b=0; #20;a=0; #20;b=1; #20;a=1;
#20;a=1;b=1; #20;b=0; #20;a=0; #20;b=1; #20;a=1;
#20;a=1;b=1; #20;b=0; #20;a=0; #20;b=1; #20;a=1;
#20;a=1;b=1; #20;b=0; #20;a=0; #20;b=1; #20;a=1;
#20;a=1;b=1; #20;b=0; #20;a=0; #20;b=1; #20;a=1;
#20;a=1;b=1; #20;b=0; #20;a=0; #20;b=1; #20;a=1;
#20;a=1;b=1; #20;b=0; #20;a=0; #20;b=1; #20;a=1;
#20;a=1;b=1; #20;b=0; #20;a=0; #20;b=1; #20;a=1;
#20;a=1;b=1; #20;b=0; #20;a=0; #20;b=1; #20;a=1;
#20;a=1;b=1; #20;b=0; #20;a=0; #20;b=1; #20;a=1;
#20;a=1;b=1; #20;b=0; #20;a=0; #20;b=1; #20;a=1;
#20;a=1;b=1; #20;b=0; #20;a=0; #20;b=1; #20;a=1;
#20;a=1;b=1; #20;b=0; #20;a=0; #20;b=1; #20;a=1;
#20;a=1;b=1; #20;b=0; #20;a=0; #20;b=1; #20;a=1;
#20;a=1;b=1; #20;b=0; #20;a=0; #20;b=1; #20;a=1;
#20;a=1;b=1; #20;b=0; #20;a=0; #20;b=1; #20;a=1;
#20;a=1;b=1; #20;b=0; #20;a=0; #20;b=1; #20;a=1;
#20;a=1;b=1; #20;b=0; #20;a=0; #20;b=1; #20;a=1;
#20;a=1;b=1; #20;b=0; #20;a=0; #20;b=1; #20;a=1;

 #20;a=1;b=1; #20;a=0; #20;b=0; #20;a=1; #20;b=1;
 #20;a=1;b=1; #20;a=0; #20;b=0; #20;a=1; #20;b=1;
 #20;a=1;b=1; #20;a=0; #20;b=0; #20;a=1; #20;b=1;
 #20;a=1;b=1; #20;a=0; #20;b=0; #20;a=1; #20;b=1;
  #20;a=1;b=1; #20;a=0; #20;b=0; #20;a=1; #20;b=1;
  #20;a=1;b=1; #20;a=0; #20;b=0; #20;a=1; #20;b=1;
    #20;a=1;b=1; #20;a=0; #20;b=0; #20;a=1; #20;b=1;
   #20;a=1;b=1; #20;a=0; #20;b=0; #20;a=1; #20;b=1;
   #20;a=1;b=1; #20;a=0; #20;b=0; #20;a=1; #20;b=1;
   #20;a=1;b=1; #20;a=0; #20;b=0; #20;a=1; #20;b=1;
   #20;a=1;b=1; #20;a=0; #20;b=0; #20;a=1; #20;b=1;
    #20;a=1;b=1; #20;a=0; #20;b=0; #20;a=1; #20;b=1;
    #20;a=1;b=1; #20;a=0; #20;b=0; #20;a=1; #20;b=1;
      #20;a=1;b=1; #20;a=0; #20;b=0; #20;a=1; #20;b=1;
     #20;a=1;b=1; #20;a=0; #20;b=0; #20;a=1; #20;b=1;
     #20;a=1;b=1; #20;a=0; #20;b=0; #20;a=1; #20;b=1;
     #20;a=1;b=1; #20;a=0; #20;b=0; #20;a=1; #20;b=1;
     #20;a=1;b=1; #20;a=0; #20;b=0; #20;a=1; #20;b=1;
      #20;a=1;b=1; #20;a=0; #20;b=0; #20;a=1; #20;b=1;
      #20;a=1;b=1; #20;a=0; #20;b=0; #20;a=1; #20;b=1;
        #20;a=1;b=1; #20;a=0; #20;b=0; #20;a=1; #20;b=1;
       #20;a=1;b=1; #20;a=0; #20;b=0; #20;a=1; #20;b=1;
       #20;a=1;b=1; #20;a=0; #20;b=0; #20;a=1; #20;b=1;
       #20;a=1;b=1; #20;a=0; #20;b=0; #20;a=1; #20;b=1;
       #20;a=1;b=1; #20;a=0; #20;b=0; #20;a=1; #20;b=1;
        #20;a=1;b=1; #20;a=0; #20;b=0; #20;a=1; #20;b=1;
        #20;a=1;b=1; #20;a=0; #20;b=0; #20;a=1; #20;b=1;
          #20;a=1;b=1; #20;a=0; #20;b=0; #20;a=1; #20;b=1;
         #20;a=1;b=1; #20;a=0; #20;b=0; #20;a=1; #20;b=1;
         #20;a=1;b=1; #20;a=0; #20;b=0; #20;a=1; #20;b=1;
         #20;a=1;b=1; #20;a=0; #20;b=0; #20;a=1; #20;b=1;
         #20;a=1;b=1; #20;a=0; #20;b=0; #20;a=1; #20;b=1;
          #20;a=1;b=1; #20;a=0; #20;b=0; #20;a=1; #20;b=1;
          #20;a=1;b=1; #20;a=0; #20;b=0; #20;a=1; #20;b=1;
            #20;a=1;b=1; #20;a=0; #20;b=0; #20;a=1; #20;b=1;
           #20;a=1;b=1; #20;a=0; #20;b=0; #20;a=1; #20;b=1;
           #20;a=1;b=1; #20;a=0; #20;b=0; #20;a=1; #20;b=1;
           #20;a=1;b=1; #20;a=0; #20;b=0; #20;a=1; #20;b=1;
           #20;a=1;b=1; #20;a=0; #20;b=0; #20;a=1; #20;b=1;
            #20;a=1;b=1; #20;a=0; #20;b=0; #20;a=1; #20;b=1;
            #20;a=1;b=1; #20;a=0; #20;b=0; #20;a=1; #20;b=1;
              #20;a=1;b=1; #20;a=0; #20;b=0; #20;a=1; #20;b=1;
             #20;a=1;b=1; #20;a=0; #20;b=0; #20;a=1; #20;b=1;
             #20;a=1;b=1; #20;a=0; #20;b=0; #20;a=1; #20;b=1;
             #20;a=1;b=1; #20;a=0; #20;b=0; #20;a=1; #20;b=1;
             #20;a=1;b=1; #20;a=0; #20;b=0; #20;a=1; #20;b=1;
              #20;a=1;b=1; #20;a=0; #20;b=0; #20;a=1; #20;b=1;
              #20;a=1;b=1; #20;a=0; #20;b=0; #20;a=1; #20;b=1;
                #20;a=1;b=1; #20;a=0; #20;b=0; #20;a=1; #20;b=1;


 
end
 
 
 
 
    
endmodule
